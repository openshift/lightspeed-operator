---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
  name: olsconfigs.ols.openshift.io
spec:
  group: ols.openshift.io
  names:
    kind: OLSConfig
    listKind: OLSConfigList
    plural: olsconfigs
    singular: olsconfig
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Red Hat OpenShift Lightspeed instance. OLSConfig is the Schema
          for the olsconfigs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: OLSConfigSpec defines the desired state of OLSConfig
            properties:
              llm:
                description: LLMSpec defines the desired state of the large language
                  model (LLM).
                properties:
                  providers:
                    items:
                      description: ProviderSpec defines the desired state of LLM provider.
                      properties:
                        apiVersion:
                          description: API Version for Azure OpenAI provider
                          type: string
                        credentialsSecretRef:
                          description: The name of the secret object that stores API
                            provider credentials
                          properties:
                            name:
                              default: ""
                              description: |-
                                Name of the referent.
                                This field is effectively required, but due to backwards compatibility is
                                allowed to be empty. Instances of this type with an empty value here are
                                almost certainly wrong.
                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        deploymentName:
                          description: Azure OpenAI deployment name
                          type: string
                        models:
                          description: List of models from the provider
                          items:
                            description: ModelSpec defines the LLM model to use and
                              its parameters.
                            properties:
                              contextWindowSize:
                                description: Defines the model's context window size.
                                  Default is specific to provider/model.
                                minimum: 1024
                                type: integer
                              name:
                                description: Model name
                                type: string
                              parameters:
                                description: Model API parameters
                                properties:
                                  maxTokensForResponse:
                                    description: Max tokens for response
                                    type: integer
                                type: object
                              url:
                                description: Model API URL
                                pattern: ^https?://.*$
                                type: string
                            required:
                            - name
                            type: object
                          type: array
                        name:
                          description: Provider name
                          type: string
                        projectID:
                          description: Watsonx Project ID
                          type: string
                        tlsSecurityProfile:
                          description: TLS Security Profile used by connection to
                            provider
                          properties:
                            custom:
                              description: |-
                                custom is a user-defined TLS security profile. Be extremely careful using a custom
                                profile as invalid configurations can be catastrophic. An example custom profile
                                looks like this:

                                  ciphers:

                                    - ECDHE-ECDSA-CHACHA20-POLY1305

                                    - ECDHE-RSA-CHACHA20-POLY1305

                                    - ECDHE-RSA-AES128-GCM-SHA256

                                    - ECDHE-ECDSA-AES128-GCM-SHA256

                                  minTLSVersion: VersionTLS11
                              nullable: true
                              properties:
                                ciphers:
                                  description: |-
                                    ciphers is used to specify the cipher algorithms that are negotiated
                                    during the TLS handshake.  Operators may remove entries their operands
                                    do not support.  For example, to use DES-CBC3-SHA  (yaml):

                                      ciphers:
                                        - DES-CBC3-SHA
                                  items:
                                    type: string
                                  type: array
                                minTLSVersion:
                                  description: |-
                                    minTLSVersion is used to specify the minimal version of the TLS protocol
                                    that is negotiated during the TLS handshake. For example, to use TLS
                                    versions 1.1, 1.2 and 1.3 (yaml):

                                      minTLSVersion: VersionTLS11

                                    NOTE: currently the highest minTLSVersion allowed is VersionTLS12
                                  enum:
                                  - VersionTLS10
                                  - VersionTLS11
                                  - VersionTLS12
                                  - VersionTLS13
                                  type: string
                              type: object
                            intermediate:
                              description: |-
                                intermediate is a TLS security profile based on:

                                https://wiki.mozilla.org/Security/Server_Side_TLS#Intermediate_compatibility_.28recommended.29

                                and looks like this (yaml):

                                  ciphers:

                                    - TLS_AES_128_GCM_SHA256

                                    - TLS_AES_256_GCM_SHA384

                                    - TLS_CHACHA20_POLY1305_SHA256

                                    - ECDHE-ECDSA-AES128-GCM-SHA256

                                    - ECDHE-RSA-AES128-GCM-SHA256

                                    - ECDHE-ECDSA-AES256-GCM-SHA384

                                    - ECDHE-RSA-AES256-GCM-SHA384

                                    - ECDHE-ECDSA-CHACHA20-POLY1305

                                    - ECDHE-RSA-CHACHA20-POLY1305

                                    - DHE-RSA-AES128-GCM-SHA256

                                    - DHE-RSA-AES256-GCM-SHA384

                                  minTLSVersion: VersionTLS12
                              nullable: true
                              type: object
                            modern:
                              description: |-
                                modern is a TLS security profile based on:

                                https://wiki.mozilla.org/Security/Server_Side_TLS#Modern_compatibility

                                and looks like this (yaml):

                                  ciphers:

                                    - TLS_AES_128_GCM_SHA256

                                    - TLS_AES_256_GCM_SHA384

                                    - TLS_CHACHA20_POLY1305_SHA256

                                  minTLSVersion: VersionTLS13
                              nullable: true
                              type: object
                            old:
                              description: |-
                                old is a TLS security profile based on:

                                https://wiki.mozilla.org/Security/Server_Side_TLS#Old_backward_compatibility

                                and looks like this (yaml):

                                  ciphers:

                                    - TLS_AES_128_GCM_SHA256

                                    - TLS_AES_256_GCM_SHA384

                                    - TLS_CHACHA20_POLY1305_SHA256

                                    - ECDHE-ECDSA-AES128-GCM-SHA256

                                    - ECDHE-RSA-AES128-GCM-SHA256

                                    - ECDHE-ECDSA-AES256-GCM-SHA384

                                    - ECDHE-RSA-AES256-GCM-SHA384

                                    - ECDHE-ECDSA-CHACHA20-POLY1305

                                    - ECDHE-RSA-CHACHA20-POLY1305

                                    - DHE-RSA-AES128-GCM-SHA256

                                    - DHE-RSA-AES256-GCM-SHA384

                                    - DHE-RSA-CHACHA20-POLY1305

                                    - ECDHE-ECDSA-AES128-SHA256

                                    - ECDHE-RSA-AES128-SHA256

                                    - ECDHE-ECDSA-AES128-SHA

                                    - ECDHE-RSA-AES128-SHA

                                    - ECDHE-ECDSA-AES256-SHA384

                                    - ECDHE-RSA-AES256-SHA384

                                    - ECDHE-ECDSA-AES256-SHA

                                    - ECDHE-RSA-AES256-SHA

                                    - DHE-RSA-AES128-SHA256

                                    - DHE-RSA-AES256-SHA256

                                    - AES128-GCM-SHA256

                                    - AES256-GCM-SHA384

                                    - AES128-SHA256

                                    - AES256-SHA256

                                    - AES128-SHA

                                    - AES256-SHA

                                    - DES-CBC3-SHA

                                  minTLSVersion: VersionTLS10
                              nullable: true
                              type: object
                            type:
                              description: |-
                                type is one of Old, Intermediate, Modern or Custom. Custom provides
                                the ability to specify individual TLS security profile parameters.
                                Old, Intermediate and Modern are TLS security profiles based on:

                                https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_configurations

                                The profiles are intent based, so they may change over time as new ciphers are developed and existing ciphers
                                are found to be insecure.  Depending on precisely which ciphers are available to a process, the list may be
                                reduced.

                                Note that the Modern profile is currently not supported because it is not
                                yet well adopted by common software libraries.
                              enum:
                              - Old
                              - Intermediate
                              - Modern
                              - Custom
                              type: string
                          type: object
                        type:
                          description: Provider type
                          enum:
                          - azure_openai
                          - bam
                          - openai
                          - watsonx
                          - rhoai_vllm
                          - rhelai_vllm
                          - fake_provider
                          type: string
                        url:
                          description: Provider API URL
                          pattern: ^https?://.*$
                          type: string
                      required:
                      - credentialsSecretRef
                      - models
                      - name
                      - type
                      type: object
                      x-kubernetes-validations:
                      - message: '''deploymentName'' must be specified for ''azure_openai''
                          provider'
                        rule: self.type != "azure_openai" || self.deploymentName !=
                          ""
                      - message: '''projectID'' must be specified for ''watsonx''
                          provider'
                        rule: self.type != "watsonx" || self.projectID != ""
                    type: array
                required:
                - providers
                type: object
              ols:
                description: OLSSpec defines the desired state of OLS deployment.
                properties:
                  additionalCAConfigMapRef:
                    description: Additional CA certificates for TLS communication
                      between OLS service and LLM Provider
                    properties:
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    type: object
                    x-kubernetes-map-type: atomic
                  conversationCache:
                    description: Conversation cache settings
                    properties:
                      postgres:
                        description: PostgresSpec defines the desired state of Postgres.
                        properties:
                          credentialsSecret:
                            default: lightspeed-postgres-secret
                            description: Secret that holds postgres credentials
                            type: string
                          dbName:
                            default: postgres
                            description: Postgres database name
                            type: string
                          maxConnections:
                            default: 2000
                            description: 'Postgres maxconnections. Default: "2000"'
                            type: integer
                          sharedBuffers:
                            default: 256MB
                            description: Postgres sharedbuffers
                            type: string
                            x-kubernetes-int-or-string: true
                          user:
                            default: postgres
                            description: Postgres user name
                            type: string
                        type: object
                      type:
                        default: postgres
                        description: 'Conversation cache type. Default: "postgres"'
                        enum:
                        - postgres
                        type: string
                    type: object
                  defaultModel:
                    description: Default model for usage
                    type: string
                  defaultProvider:
                    description: Default provider for usage
                    type: string
                  deployment:
                    description: OLS deployment settings
                    properties:
                      api:
                        description: API container settings.
                        properties:
                          nodeSelector:
                            additionalProperties:
                              type: string
                            type: object
                          resources:
                            description: ResourceRequirements describes the compute
                              resource requirements.
                            properties:
                              claims:
                                description: |-
                                  Claims lists the names of resources, defined in spec.resourceClaims,
                                  that are used by this container.

                                  This is an alpha field and requires enabling the
                                  DynamicResourceAllocation feature gate.

                                  This field is immutable. It can only be set for containers.
                                items:
                                  description: ResourceClaim references one entry
                                    in PodSpec.ResourceClaims.
                                  properties:
                                    name:
                                      description: |-
                                        Name must match the name of one entry in pod.spec.resourceClaims of
                                        the Pod where this field is used. It makes that resource available
                                        inside a container.
                                      type: string
                                    request:
                                      description: |-
                                        Request is the name chosen for a request in the referenced claim.
                                        If empty, everything from the claim is made available, otherwise
                                        only the result of this request.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              limits:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Limits describes the maximum amount of compute resources allowed.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                              requests:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Requests describes the minimum amount of compute resources required.
                                  If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                  otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                            type: object
                          tolerations:
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                        type: object
                      console:
                        description: Console container settings.
                        properties:
                          caCertificate:
                            description: Certificate Authority (CA) certificate used
                              by the console proxy endpoint.
                            pattern: ^-----BEGIN CERTIFICATE-----([\s\S]*)-----END
                              CERTIFICATE-----\s?$
                            type: string
                          nodeSelector:
                            additionalProperties:
                              type: string
                            type: object
                          replicas:
                            default: 1
                            description: 'Defines the number of desired Console pods.
                              Default: "1"'
                            format: int32
                            minimum: 0
                            type: integer
                          resources:
                            description: ResourceRequirements describes the compute
                              resource requirements.
                            properties:
                              claims:
                                description: |-
                                  Claims lists the names of resources, defined in spec.resourceClaims,
                                  that are used by this container.

                                  This is an alpha field and requires enabling the
                                  DynamicResourceAllocation feature gate.

                                  This field is immutable. It can only be set for containers.
                                items:
                                  description: ResourceClaim references one entry
                                    in PodSpec.ResourceClaims.
                                  properties:
                                    name:
                                      description: |-
                                        Name must match the name of one entry in pod.spec.resourceClaims of
                                        the Pod where this field is used. It makes that resource available
                                        inside a container.
                                      type: string
                                    request:
                                      description: |-
                                        Request is the name chosen for a request in the referenced claim.
                                        If empty, everything from the claim is made available, otherwise
                                        only the result of this request.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              limits:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Limits describes the maximum amount of compute resources allowed.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                              requests:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Requests describes the minimum amount of compute resources required.
                                  If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                  otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                            type: object
                          tolerations:
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                        type: object
                      dataCollector:
                        description: Data Collector container settings.
                        properties:
                          resources:
                            description: ResourceRequirements describes the compute
                              resource requirements.
                            properties:
                              claims:
                                description: |-
                                  Claims lists the names of resources, defined in spec.resourceClaims,
                                  that are used by this container.

                                  This is an alpha field and requires enabling the
                                  DynamicResourceAllocation feature gate.

                                  This field is immutable. It can only be set for containers.
                                items:
                                  description: ResourceClaim references one entry
                                    in PodSpec.ResourceClaims.
                                  properties:
                                    name:
                                      description: |-
                                        Name must match the name of one entry in pod.spec.resourceClaims of
                                        the Pod where this field is used. It makes that resource available
                                        inside a container.
                                      type: string
                                    request:
                                      description: |-
                                        Request is the name chosen for a request in the referenced claim.
                                        If empty, everything from the claim is made available, otherwise
                                        only the result of this request.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              limits:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Limits describes the maximum amount of compute resources allowed.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                              requests:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Requests describes the minimum amount of compute resources required.
                                  If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                  otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                            type: object
                        type: object
                      database:
                        description: Database container settings.
                        properties:
                          nodeSelector:
                            additionalProperties:
                              type: string
                            type: object
                          resources:
                            description: ResourceRequirements describes the compute
                              resource requirements.
                            properties:
                              claims:
                                description: |-
                                  Claims lists the names of resources, defined in spec.resourceClaims,
                                  that are used by this container.

                                  This is an alpha field and requires enabling the
                                  DynamicResourceAllocation feature gate.

                                  This field is immutable. It can only be set for containers.
                                items:
                                  description: ResourceClaim references one entry
                                    in PodSpec.ResourceClaims.
                                  properties:
                                    name:
                                      description: |-
                                        Name must match the name of one entry in pod.spec.resourceClaims of
                                        the Pod where this field is used. It makes that resource available
                                        inside a container.
                                      type: string
                                    request:
                                      description: |-
                                        Request is the name chosen for a request in the referenced claim.
                                        If empty, everything from the claim is made available, otherwise
                                        only the result of this request.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              limits:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Limits describes the maximum amount of compute resources allowed.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                              requests:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                description: |-
                                  Requests describes the minimum amount of compute resources required.
                                  If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                  otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                  More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                type: object
                            type: object
                          tolerations:
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                        type: object
                      replicas:
                        default: 1
                        description: 'Defines the number of desired OLS pods. Default:
                          "1"'
                        format: int32
                        minimum: 0
                        type: integer
                    type: object
                  introspectionEnabled:
                    description: Enable introspection features
                    type: boolean
                  logLevel:
                    default: INFO
                    description: 'Log level. Valid options are DEBUG, INFO, WARNING,
                      ERROR and CRITICAL. Default: "INFO".'
                    enum:
                    - DEBUG
                    - INFO
                    - WARNING
                    - ERROR
                    - CRITICAL
                    type: string
                  proxyConfig:
                    description: Proxy settings for connecting to external servers,
                      such as LLM providers.
                    properties:
                      proxyCACertificate:
                        description: The configmap holding proxy CA certificate
                        properties:
                          name:
                            default: ""
                            description: |-
                              Name of the referent.
                              This field is effectively required, but due to backwards compatibility is
                              allowed to be empty. Instances of this type with an empty value here are
                              almost certainly wrong.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      proxyURL:
                        description: |-
                          Proxy URL, e.g. https://proxy.example.com:8080
                          If not specified, the cluster wide proxy will be used, though env var "https_proxy".
                        pattern: ^https?://.*$
                        type: string
                    type: object
                  queryFilters:
                    description: Query filters
                    items:
                      description: QueryFiltersSpec defines filters to manipulate
                        questions/queries.
                      properties:
                        name:
                          description: Filter name.
                          type: string
                        pattern:
                          description: Filter pattern.
                          type: string
                        replaceWith:
                          description: Replacement for the matched pattern.
                          type: string
                      type: object
                    type: array
                  quotaHandlersConfig:
                    description: LLM Token Quota Configuration
                    properties:
                      enableTokenHistory:
                        description: Enable token history
                        type: boolean
                      limitersConfig:
                        description: Token quota limiters
                        items:
                          description: LimiterConfig defines settings for a token
                            quota limiter
                          properties:
                            initialQuota:
                              description: Initial value of the token quota
                              minimum: 0
                              type: integer
                            name:
                              description: Name of the limiter
                              type: string
                            period:
                              description: Period of time the token quota is for
                              pattern: ^(1\s+(day|month|year|d|m|y)|([2-9][0-9]*|[1-9][0-9]{2,})\s+(days|months|years|d|m|y))$
                              type: string
                            quotaIncrease:
                              description: Token quota increase step
                              minimum: 0
                              type: integer
                            type:
                              description: Type of the limiter
                              enum:
                              - cluster_limiter
                              - user_limiter
                              type: string
                          required:
                          - initialQuota
                          - name
                          - period
                          - quotaIncrease
                          - type
                          type: object
                        type: array
                    type: object
                  rag:
                    description: RAG databases
                    items:
                      description: RAGSpec defines how to retrieve a RAG databases.
                      properties:
                        image:
                          description: The URL of the container image to use as a
                            RAG source
                          type: string
                        indexID:
                          default: vector_db_index
                          description: The Index ID of the RAG database
                          type: string
                        indexPath:
                          default: /rag/vector_db
                          description: The path to the RAG database inside of the
                            container image
                          type: string
                      required:
                      - image
                      type: object
                    type: array
                  storage:
                    description: Persistent Storage Configuration
                    properties:
                      class:
                        description: Storage class of the requested volume
                        type: string
                      size:
                        anyOf:
                        - type: integer
                        - type: string
                        description: Size of the requested volume
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                    type: object
                  tlsConfig:
                    description: TLS configuration of the Lightspeed backend's HTTPS
                      endpoint
                    properties:
                      keyCertSecretRef:
                        description: KeySecretRef is the secret that holds the TLS
                          key.
                        properties:
                          name:
                            default: ""
                            description: |-
                              Name of the referent.
                              This field is effectively required, but due to backwards compatibility is
                              allowed to be empty. Instances of this type with an empty value here are
                              almost certainly wrong.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                    type: object
                  tlsSecurityProfile:
                    description: TLS Security Profile used by API endpoints
                    properties:
                      custom:
                        description: |-
                          custom is a user-defined TLS security profile. Be extremely careful using a custom
                          profile as invalid configurations can be catastrophic. An example custom profile
                          looks like this:

                            ciphers:

                              - ECDHE-ECDSA-CHACHA20-POLY1305

                              - ECDHE-RSA-CHACHA20-POLY1305

                              - ECDHE-RSA-AES128-GCM-SHA256

                              - ECDHE-ECDSA-AES128-GCM-SHA256

                            minTLSVersion: VersionTLS11
                        nullable: true
                        properties:
                          ciphers:
                            description: |-
                              ciphers is used to specify the cipher algorithms that are negotiated
                              during the TLS handshake.  Operators may remove entries their operands
                              do not support.  For example, to use DES-CBC3-SHA  (yaml):

                                ciphers:
                                  - DES-CBC3-SHA
                            items:
                              type: string
                            type: array
                          minTLSVersion:
                            description: |-
                              minTLSVersion is used to specify the minimal version of the TLS protocol
                              that is negotiated during the TLS handshake. For example, to use TLS
                              versions 1.1, 1.2 and 1.3 (yaml):

                                minTLSVersion: VersionTLS11

                              NOTE: currently the highest minTLSVersion allowed is VersionTLS12
                            enum:
                            - VersionTLS10
                            - VersionTLS11
                            - VersionTLS12
                            - VersionTLS13
                            type: string
                        type: object
                      intermediate:
                        description: |-
                          intermediate is a TLS security profile based on:

                          https://wiki.mozilla.org/Security/Server_Side_TLS#Intermediate_compatibility_.28recommended.29

                          and looks like this (yaml):

                            ciphers:

                              - TLS_AES_128_GCM_SHA256

                              - TLS_AES_256_GCM_SHA384

                              - TLS_CHACHA20_POLY1305_SHA256

                              - ECDHE-ECDSA-AES128-GCM-SHA256

                              - ECDHE-RSA-AES128-GCM-SHA256

                              - ECDHE-ECDSA-AES256-GCM-SHA384

                              - ECDHE-RSA-AES256-GCM-SHA384

                              - ECDHE-ECDSA-CHACHA20-POLY1305

                              - ECDHE-RSA-CHACHA20-POLY1305

                              - DHE-RSA-AES128-GCM-SHA256

                              - DHE-RSA-AES256-GCM-SHA384

                            minTLSVersion: VersionTLS12
                        nullable: true
                        type: object
                      modern:
                        description: |-
                          modern is a TLS security profile based on:

                          https://wiki.mozilla.org/Security/Server_Side_TLS#Modern_compatibility

                          and looks like this (yaml):

                            ciphers:

                              - TLS_AES_128_GCM_SHA256

                              - TLS_AES_256_GCM_SHA384

                              - TLS_CHACHA20_POLY1305_SHA256

                            minTLSVersion: VersionTLS13
                        nullable: true
                        type: object
                      old:
                        description: |-
                          old is a TLS security profile based on:

                          https://wiki.mozilla.org/Security/Server_Side_TLS#Old_backward_compatibility

                          and looks like this (yaml):

                            ciphers:

                              - TLS_AES_128_GCM_SHA256

                              - TLS_AES_256_GCM_SHA384

                              - TLS_CHACHA20_POLY1305_SHA256

                              - ECDHE-ECDSA-AES128-GCM-SHA256

                              - ECDHE-RSA-AES128-GCM-SHA256

                              - ECDHE-ECDSA-AES256-GCM-SHA384

                              - ECDHE-RSA-AES256-GCM-SHA384

                              - ECDHE-ECDSA-CHACHA20-POLY1305

                              - ECDHE-RSA-CHACHA20-POLY1305

                              - DHE-RSA-AES128-GCM-SHA256

                              - DHE-RSA-AES256-GCM-SHA384

                              - DHE-RSA-CHACHA20-POLY1305

                              - ECDHE-ECDSA-AES128-SHA256

                              - ECDHE-RSA-AES128-SHA256

                              - ECDHE-ECDSA-AES128-SHA

                              - ECDHE-RSA-AES128-SHA

                              - ECDHE-ECDSA-AES256-SHA384

                              - ECDHE-RSA-AES256-SHA384

                              - ECDHE-ECDSA-AES256-SHA

                              - ECDHE-RSA-AES256-SHA

                              - DHE-RSA-AES128-SHA256

                              - DHE-RSA-AES256-SHA256

                              - AES128-GCM-SHA256

                              - AES256-GCM-SHA384

                              - AES128-SHA256

                              - AES256-SHA256

                              - AES128-SHA

                              - AES256-SHA

                              - DES-CBC3-SHA

                            minTLSVersion: VersionTLS10
                        nullable: true
                        type: object
                      type:
                        description: |-
                          type is one of Old, Intermediate, Modern or Custom. Custom provides
                          the ability to specify individual TLS security profile parameters.
                          Old, Intermediate and Modern are TLS security profiles based on:

                          https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_configurations

                          The profiles are intent based, so they may change over time as new ciphers are developed and existing ciphers
                          are found to be insecure.  Depending on precisely which ciphers are available to a process, the list may be
                          reduced.

                          Note that the Modern profile is currently not supported because it is not
                          yet well adopted by common software libraries.
                        enum:
                        - Old
                        - Intermediate
                        - Modern
                        - Custom
                        type: string
                    type: object
                  userDataCollection:
                    description: User data collection switches
                    properties:
                      feedbackDisabled:
                        type: boolean
                      transcriptsDisabled:
                        type: boolean
                    type: object
                required:
                - defaultModel
                - defaultProvider
                type: object
              olsDataCollector:
                description: OLSDataCollectorSpec defines allowed OLS data collector
                  configuration.
                properties:
                  logLevel:
                    default: INFO
                    description: 'Log level. Valid options are DEBUG, INFO, WARNING,
                      ERROR and CRITICAL. Default: "INFO".'
                    enum:
                    - DEBUG
                    - INFO
                    - WARNING
                    - ERROR
                    - CRITICAL
                    type: string
                type: object
            required:
            - llm
            - ols
            type: object
          status:
            description: OLSConfigStatus defines the observed state of OLS deployment.
            properties:
              conditions:
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
            required:
            - conditions
            type: object
        required:
        - spec
        type: object
        x-kubernetes-validations:
        - message: .metadata.name must be 'cluster'
          rule: self.metadata.name == 'cluster'
    served: true
    storage: true
    subresources:
      status: {}
